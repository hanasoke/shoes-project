<!-- views/shoes/edit.html -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Edit Shoe</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <style>
      .form-label {
        font-weight: 500;
      }
      .required::after {
        content: " *";
        color: #dc3545;
      }
    </style>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg bg-dark">
        <div class="container">
            <a class="navbar-brand text-light" href="/">Homepage</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active text-light" href="/shoes">Shoes</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active text-light" href="/brands">Brand</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- End Navbar -->
    
    <div class="container my-3">
        <div class="row d-flex justify-content-center">
            <div class="col-8">
                <h2 class="text-center">Edit Shoe</h2>
                <div class="text-center text-muted mb-3">
                  ID: SH{{ .shoe.Id }} | Created: {{ .shoe.CreatedAt.Format "02 Jan 2006" }}
                </div>
                
                <hr>

                <form action="/shoe/edit?id={{ .shoe.Id }}" method="POST" novalidate>
                    <!-- Name Field -->
                    <div class="mb-3">
                        <label for="name" class="form-label required">Name</label>
                        <input type="text" class="form-control {{ if .errors.name }}is-invalid{{ end }}" 
                               name="name" id="name" autocomplete="off" 
                               value="{{ if .form.name }}{{ .form.name }}{{ else }}{{ .shoe.Name }}{{ end }}"
                               required>
                        {{ if .errors.name }}
                            <div class="invalid-feedback">
                                {{ .errors.name }}
                            </div>
                        {{ else }}
                            <div class="form-text">Enter the shoe name</div>
                        {{ end }}
                    </div>

                    <!-- Brand Field -->
                    <div class="mb-3">
                        <label for="id_brand" class="form-label required">Brand</label>
                        <select class="form-select {{ if .errors.brand }}is-invalid{{ end }}" 
                                id="id_brand" name="id_brand" required>
                            <option value="" disabled>Select A Brand</option>
                            {{ range .brands }}
                                <option value="{{ .Id }}" 
                                  {{ if $.form.idBrand }}
                                    {{ if eq .Id $.form.idBrand }}selected{{ end }}
                                  {{ else }}
                                    {{ if eq .Id $.shoe.Brand.Id }}selected{{ end }}
                                  {{ end }}>
                                    {{ .Name }}
                                </option>
                            {{ end }}
                        </select>
                        {{ if .errors.brand }}
                            <div class="invalid-feedback">
                                {{ .errors.brand }}
                            </div>
                        {{ else }}
                            <div class="form-text">Select the shoe brand</div>
                        {{ end }}
                    </div>

                    <!-- Type Field -->
                    <div class="mb-3">
                        <label for="type" class="form-label required">Type</label>
                        <input type="text" class="form-control {{ if .errors.type }}is-invalid{{ end }}" 
                               name="type" id="type" autocomplete="off" 
                               value="{{ if .form.type }}{{ .form.type }}{{ else }}{{ .shoe.Type }}{{ end }}"
                               required>
                        {{ if .errors.type }}
                            <div class="invalid-feedback">
                                {{ .errors.type }}
                            </div>
                        {{ else }}
                            <div class="form-text">Enter the shoe type (e.g., Running, Casual, Sports)</div>
                        {{ end }}
                    </div>

                    <!-- Description Field -->
                    <div class="mb-3">
                        <label for="description" class="form-label required">Description</label>
                        <textarea class="form-control {{ if .errors.description }}is-invalid{{ end }}" 
                                  name="description" id="description" rows="3" required>{{ if .form.description }}{{ .form.description }}{{ else }}{{ .shoe.Description }}{{ end }}</textarea>
                        {{ if .errors.description }}
                            <div class="invalid-feedback">
                                {{ .errors.description }}
                            </div>
                        {{ else }}
                            <div class="form-text">Enter a detailed description of the shoe</div>
                        {{ end }}
                    </div>

                    <!-- SKU Field -->
                    <div class="mb-3">
                        <label for="sku" class="form-label required">SKU</label>
                        <input type="text" class="form-control {{ if .errors.sku }}is-invalid{{ end }}" 
                               name="sku" id="sku" autocomplete="off" 
                               value="{{ if .form.sku }}{{ .form.sku }}{{ else }}{{ .shoe.SKU }}{{ end }}"
                               required>
                        {{ if .errors.sku }}
                            <div class="invalid-feedback">
                                {{ .errors.sku }}
                            </div>
                        {{ else }}
                            <div class="form-text">Enter the Stock Keeping Unit (unique identifier)</div>
                        {{ end }}
                    </div>

                    <!-- Price Field -->
                    <div class="mb-3">
                        <label for="price" class="form-label required">Price</label>
                        <div class="input-group">
                            <span class="input-group-text">Rp</span>
                            <input type="number" class="form-control {{ if .errors.price }}is-invalid{{ end }}" 
                                   name="price" id="price" min="1" autocomplete="off" 
                                   value="{{ if .form.price }}{{ .form.price }}{{ else }}{{ .shoe.Price }}{{ end }}"
                                   required>
                        </div>
                        {{ if .errors.price }}
                            <div class="invalid-feedback">
                                {{ .errors.price }}
                            </div>
                        {{ else }}
                            <div class="form-text">
                                Current price: {{ formatRupiah .shoe.Price }}
                            </div>
                        {{ end }}
                    </div>

                    <!-- Stock Field -->
                    <div class="mb-3">
                        <label for="stock" class="form-label required">Stock</label>
                        <input type="number" class="form-control {{ if .errors.stock }}is-invalid{{ end }}" 
                               name="stock" id="stock" min="0" autocomplete="off" 
                               value="{{ if .form.stock }}{{ .form.stock }}{{ else }}{{ .shoe.Stock }}{{ end }}"
                               required>
                        {{ if .errors.stock }}
                            <div class="invalid-feedback">
                                {{ .errors.stock }}
                            </div>
                        {{ else }}
                            <div class="form-text">Enter the available stock quantity</div>
                        {{ end }}
                    </div>

                    <!-- Action Buttons -->
                    <div class="row">
                        <div class="col">
                            <a href="/shoe/detail?id={{ .shoe.Id }}" class="btn btn-secondary">
                                <i class="bi bi-arrow-left"></i> Cancel
                            </a>
                        </div>
                        <div class="col text-end">
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-check-circle"></i> Update Shoe
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  </body>
</html>